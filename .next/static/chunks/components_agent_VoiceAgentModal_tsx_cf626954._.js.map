{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/barondoss/Dev/dossx-latest/components/agent/VoiceAgentModal.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef, useState } from 'react';\nimport dynamic from 'next/dynamic';\n\n// Lazy-load the ElevenLabs voice widget wrapper (your existing component)\nconst VoiceAgent = dynamic(() => import('./VoiceAgent'), { ssr: false });\n\nexport default function VoiceAgentModal({\n  label = 'Talk Now',\n  className = 'rv-button rv-button-primary inline-flex items-center justify-center px-6 py-3 text-sm font-semibold'\n}: { label?: string; className?: string }) {\n  const [open, setOpen] = useState(false);\n  const firstFocusable = useRef<HTMLButtonElement | null>(null);\n  const dialogRef = useRef<HTMLDivElement | null>(null);\n\n  // ESC to close\n  useEffect(() => {\n    function onKey(e: KeyboardEvent) {\n      if (e.key === 'Escape') setOpen(false);\n    }\n    if (open) document.addEventListener('keydown', onKey);\n    return () => document.removeEventListener('keydown', onKey);\n  }, [open]);\n\n  // Simple focus trap + autofocus close button\n  useEffect(() => {\n    if (!open) return;\n    firstFocusable.current?.focus();\n    function trap(e: KeyboardEvent) {\n      if (e.key !== 'Tab') return;\n      const focusables = dialogRef.current?.querySelectorAll<HTMLElement>(\n        'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n      );\n      if (!focusables || focusables.length === 0) return;\n      const first = focusables[0];\n      const last = focusables[focusables.length - 1];\n      if (e.shiftKey && document.activeElement === first) {\n        e.preventDefault();\n        (last as HTMLElement).focus();\n      } else if (!e.shiftKey && document.activeElement === last) {\n        e.preventDefault();\n        (first as HTMLElement).focus();\n      }\n    }\n    document.addEventListener('keydown', trap);\n    return () => document.removeEventListener('keydown', trap);\n  }, [open]);\n\n  return (\n    <>\n      <button\n        onClick={() => setOpen(true)}\n        className={className}\n        aria-haspopup=\"dialog\"\n        aria-expanded={open}\n        aria-controls=\"tiffany-modal\"\n      >\n        <div className=\"rv-button-top\"><span>{label}</span></div>\n        <div className=\"rv-button-bottom\"><span className=\"text-nowrap\">{label}</span></div>\n      </button>\n\n      {open && (\n        <div\n          id=\"tiffany-modal\"\n          role=\"dialog\"\n          aria-modal=\"true\"\n          className=\"fixed inset-0 z-[100] flex items-center justify-center\"\n        >\n          {/* Backdrop */}\n          <div\n            className=\"absolute inset-0 bg-black/70 backdrop-blur-sm\"\n            onClick={() => setOpen(false)}\n            aria-hidden=\"true\"\n          />\n\n          {/* Modal */}\n          <div\n            ref={dialogRef}\n            className=\"relative z-[101] w-full max-w-xl rounded-2xl border border-white/10 bg-neutral-900 p-4 shadow-2xl\"\n          >\n            <div className=\"mb-2 flex items-center justify-between\">\n              <h3 className=\"text-lg font-semibold\">Talk to Tiffany â€” 24/7 DossX Voice Rep</h3>\n              <button\n                ref={firstFocusable}\n                onClick={() => setOpen(false)}\n                className=\"rounded-md border border-white/10 px-2 py-1 text-sm text-white/70 hover:text-white\"\n                aria-label=\"Close\"\n              >\n                Close\n              </button>\n            </div>\n\n            {/* Live voice widget */}\n            <div className=\"rounded-xl border border-white/10 bg-black/30 p-3\">\n              <VoiceAgent />\n            </div>\n\n            <p className=\"mt-3 text-xs text-white/60\">\n              Tip: Ask about pricing, integrations, or how to connect your calendar and knowledge base.\n            </p>\n          </div>\n        </div>\n      )}\n    </>\n  );\n}"],"names":[],"mappings":";;;;AAEA;AACA;;;;AAHA;;;AAKA,0EAA0E;AAC1E,MAAM,aAAa,CAAA,GAAA,sTAAA,CAAA,UAAO,AAAD,EAAE;;;;;;IAAgC,KAAK;;KAA1D;AAES,SAAS,gBAAgB,EACtC,QAAQ,UAAU,EAClB,YAAY,qGAAqG,EAC1E;;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,iTAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,iBAAiB,CAAA,GAAA,iTAAA,CAAA,SAAM,AAAD,EAA4B;IACxD,MAAM,YAAY,CAAA,GAAA,iTAAA,CAAA,SAAM,AAAD,EAAyB;IAEhD,eAAe;IACf,CAAA,GAAA,iTAAA,CAAA,YAAS,AAAD;qCAAE;YACR,SAAS,MAAM,CAAgB;gBAC7B,IAAI,EAAE,GAAG,KAAK,UAAU,QAAQ;YAClC;YACA,IAAI,MAAM,SAAS,gBAAgB,CAAC,WAAW;YAC/C;6CAAO,IAAM,SAAS,mBAAmB,CAAC,WAAW;;QACvD;oCAAG;QAAC;KAAK;IAET,6CAA6C;IAC7C,CAAA,GAAA,iTAAA,CAAA,YAAS,AAAD;qCAAE;YACR,IAAI,CAAC,MAAM;YACX,eAAe,OAAO,EAAE;YACxB,SAAS,KAAK,CAAgB;gBAC5B,IAAI,EAAE,GAAG,KAAK,OAAO;gBACrB,MAAM,aAAa,UAAU,OAAO,EAAE,iBACpC;gBAEF,IAAI,CAAC,cAAc,WAAW,MAAM,KAAK,GAAG;gBAC5C,MAAM,QAAQ,UAAU,CAAC,EAAE;gBAC3B,MAAM,OAAO,UAAU,CAAC,WAAW,MAAM,GAAG,EAAE;gBAC9C,IAAI,EAAE,QAAQ,IAAI,SAAS,aAAa,KAAK,OAAO;oBAClD,EAAE,cAAc;oBACf,KAAqB,KAAK;gBAC7B,OAAO,IAAI,CAAC,EAAE,QAAQ,IAAI,SAAS,aAAa,KAAK,MAAM;oBACzD,EAAE,cAAc;oBACf,MAAsB,KAAK;gBAC9B;YACF;YACA,SAAS,gBAAgB,CAAC,WAAW;YACrC;6CAAO,IAAM,SAAS,mBAAmB,CAAC,WAAW;;QACvD;oCAAG;QAAC;KAAK;IAET,qBACE;;0BACE,iVAAC;gBACC,SAAS,IAAM,QAAQ;gBACvB,WAAW;gBACX,iBAAc;gBACd,iBAAe;gBACf,iBAAc;;kCAEd,iVAAC;wBAAI,WAAU;kCAAgB,cAAA,iVAAC;sCAAM;;;;;;;;;;;kCACtC,iVAAC;wBAAI,WAAU;kCAAmB,cAAA,iVAAC;4BAAK,WAAU;sCAAe;;;;;;;;;;;;;;;;;YAGlE,sBACC,iVAAC;gBACC,IAAG;gBACH,MAAK;gBACL,cAAW;gBACX,WAAU;;kCAGV,iVAAC;wBACC,WAAU;wBACV,SAAS,IAAM,QAAQ;wBACvB,eAAY;;;;;;kCAId,iVAAC;wBACC,KAAK;wBACL,WAAU;;0CAEV,iVAAC;gCAAI,WAAU;;kDACb,iVAAC;wCAAG,WAAU;kDAAwB;;;;;;kDACtC,iVAAC;wCACC,KAAK;wCACL,SAAS,IAAM,QAAQ;wCACvB,WAAU;wCACV,cAAW;kDACZ;;;;;;;;;;;;0CAMH,iVAAC;gCAAI,WAAU;0CACb,cAAA,iVAAC;;;;;;;;;;0CAGH,iVAAC;gCAAE,WAAU;0CAA6B;;;;;;;;;;;;;;;;;;;;AAQtD;GAlGwB;MAAA","debugId":null}}]
}